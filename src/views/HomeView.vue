/**
 * æ–‡ä»¶å: HomeView.vue
 * æè¿°: ç½‘ç«™é¦–é¡µè§†å›¾
 * åœ¨é¡¹ç›®ä¸­çš„ä½œç”¨: 
 * - ä½œä¸ºç”¨æˆ·è®¿é—®ç½‘ç«™çš„ç¬¬ä¸€ä¸ªé¡µé¢
 * - å±•ç¤ºäº§å“çš„ä¸»è¦ç‰¹ç‚¹å’Œæ ¸å¿ƒåŠŸèƒ½
 * - æä¾›å¯¼èˆªåˆ°å…¶ä»–é¡µé¢çš„å…¥å£
 * - é€šè¿‡è§†è§‰å…ƒç´ å’Œäº¤äº’ä½“éªŒå¸å¼•ç”¨æˆ·
 */

<script setup lang="ts">
import { ref } from 'vue';
import { useRouter } from 'vue-router';
import HeroBanner from '../components/home/HeroBanner.vue';
import MissionStatement from '../components/home/MissionStatement.vue';
import VideoProductShowcase from '../components/home/VideoProductShowcase.vue';
import ProductHighlights from '../components/home/ProductHighlights.vue';
import SolutionsCarousel from '../components/home/SolutionsCarousel.vue';
import ActionCards from '../components/home/ActionCards.vue';
import SuccessStories from '../components/home/SuccessStories.vue';
import CtaSection from '../components/home/CtaSection.vue';
import TransitionBanner from '../components/home/TransitionBanner.vue';

const router = useRouter();
const videoShowcaseRef = ref<HTMLElement | null>(null);
const secondShowcaseRef = ref<HTMLElement | null>(null);
const productHighlightsRef = ref<HTMLElement | null>(null);

// ç¬¬ä¸€ä¸ªäº§å“æ•°æ®
const productOne = {
  title: 'Skydio X10:',
  subtitle: "You've never seen like this before",
  description: 'A world-class drone program starts with Skydio X10. Loaded with the best sensors in its class, guided by the most advanced AI in the sky, and built to gather the data you need, wherever and whenever you need it.',
  videoSrc: '/src/assets/videos/file.mp4',
  ctaText: 'See X10 in action',
  ctaLink: '/monitor-screen'
};

// ç¬¬äºŒä¸ªäº§å“æ•°æ®
const productTwo = {
  title: 'Skydio 3:',
  subtitle: 'Mission-ready. Day or night.',
  description: 'Skydio drone programs help even the most dangerous work get done safer, smarter, and faster through remote autonomous flight. From Drone as First Responder to automated inspection and site security, Skydio helps you get the intelligence you need to make the best decisions.',
  videoSrc: '/src/assets/videos/file.mp4',
  ctaText: 'Vehicle Monitoring',
  ctaLink: '/vehicle-monitoring'
};

// Smooth scroll to the video showcase section
const scrollToVideoShowcase = () => {
  if (videoShowcaseRef.value) {
    videoShowcaseRef.value.scrollIntoView({ behavior: 'smooth' });
  }
};

// Smooth scroll to the second showcase section
const scrollToSecondShowcase = () => {
  if (secondShowcaseRef.value) {
    secondShowcaseRef.value.scrollIntoView({ behavior: 'smooth' });
  }
};

// Smooth scroll to the product highlights section
const scrollToProductHighlights = () => {
  if (productHighlightsRef.value) {
    productHighlightsRef.value.scrollIntoView({ behavior: 'smooth' });
  }
};

// å‰å¾€æ— äººæœºä»»åŠ¡é¡µé¢
const goToDroneTask = () => {
  router.push('/drone-task');
};
</script>

<template>
  <main class="home-view">
    <!-- é¦–å±åŒºåŸŸ -->
    <HeroBanner @scroll-to-showcase="scrollToVideoShowcase" />
    
    <!-- æ¼”ç¤ºåŠŸèƒ½å…¥å£ -->
    <!-- <div class="demo-section">
      <div class="container mx-auto px-4 py-8">
        <h2 class="text-2xl font-bold text-center mb-8">äº§å“åŠŸèƒ½æ¼”ç¤º</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="demo-card" @click="router.push('/data-dashboard-detail')">
            <div class="demo-icon">ğŸ“Š</div>
            <h3>æ•°æ®ä»ªè¡¨ç›˜</h3>
            <p>æŸ¥çœ‹æ— äººæœºæ•°æ®åˆ†æå’Œå¯è§†åŒ–ç•Œé¢</p>
          </div>
          
          <div class="demo-card" @click="goToDroneTask">
            <div class="demo-icon">ğŸ›¸</div>
            <h3>æ— äººæœºå·¡é€»ä»»åŠ¡</h3>
            <p>æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„æ— äººæœºå·¡é€»ä»»åŠ¡</p>
          </div>
          
          <div class="demo-card" @click="router.push('/geo-api')">
            <div class="demo-icon">ğŸ—ºï¸</div>
            <h3>åœ°ç†æœåŠ¡API</h3>
            <p>ä½“éªŒä½ç½®æœç´¢ã€è·¯å¾„è§„åˆ’ç­‰åœ°ç†æœåŠ¡</p>
          </div>
        </div>
      </div>
    </div> -->
    
    <!-- è¿‡æ¸¡åŒºåŸŸ - é™æ€å±•ç¤ºæ ‡é¢˜ -->
    <div class="transition-section">
      <div class="wave-divider top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none">
          <path d="M0,192L48,165.3C96,139,192,85,288,96C384,107,480,181,576,202.7C672,224,768,192,864,176C960,160,1056,160,1152,176C1248,192,1344,224,1392,240L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
        </svg>
      </div>
      <TransitionBanner 
        title="å…¨å¤©å€™æ‰§è¡Œä»»åŠ¡" 
        subtitle="æœ€å…ˆè¿›çš„è‡ªä¸»é£è¡Œç³»ç»Ÿï¼Œæ»¡è¶³æ‚¨çš„å„ç§éœ€æ±‚"
        bgImage="https://images.unsplash.com/photo-1622552279904-5c0c3f379f6c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1974&q=80"
      />
      <div class="wave-divider bottom">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none">
          <path d="M0,192L48,165.3C96,139,192,85,288,96C384,107,480,181,576,202.7C672,224,768,192,864,176C960,160,1056,160,1152,176C1248,192,1344,224,1392,240L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
        </svg>
      </div>
    </div>
    
    <!-- ä½¿å‘½å®£è¨€ -->
    <MissionStatement />
    
    <!-- ç¬¬ä¸€ä¸ªè§†é¢‘å±•ç¤ºåŒºåŸŸ -->
    <div ref="videoShowcaseRef" class="video-showcase-container">
      <VideoProductShowcase :product="productOne" />
    </div>
    
    <!-- ç¬¬äºŒä¸ªè§†é¢‘å±•ç¤ºåŒºåŸŸ -->
    <div ref="secondShowcaseRef" class="video-showcase-container">
      <VideoProductShowcase :product="productTwo" />
    </div>
    
    <!-- åŠŸèƒ½å¡ç‰‡ -->
    <ActionCards />
    
    <!-- è§£å†³æ–¹æ¡ˆè½®æ’­ -->
    <SolutionsCarousel @scrollToNext="scrollToProductHighlights" />
    
    <!-- äº§å“äº®ç‚¹ -->
    <div ref="productHighlightsRef">
      <ProductHighlights />
    </div>
    
    <!-- ç”¨æˆ·æ•…äº‹ -->
    <SuccessStories title="ç”¨æˆ·ä½¿ç”¨ä½“éªŒ" description="çœ‹çœ‹ä¸“ä¸šäººå£«å¦‚ä½•è¯„ä»·Skydioæ— äººæœºè§£å†³æ–¹æ¡ˆ" />
    
    <!-- è¡ŒåŠ¨å·å¬ -->
    <CtaSection />
  </main>
</template>

<style scoped>
.home-view {
  padding-top: 60px;
  position: relative;
  overflow-x: hidden;
  background-color: #ffffff;
}

/* æ¼”ç¤ºåŠŸèƒ½åŒºåŸŸ */
.demo-section {
  background-color: #f8fafc;
  padding: 40px 0;
}

.demo-card {
  background-color: white;
  border-radius: 12px;
  padding: 30px 20px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
  cursor: pointer;
  transition: all 0.3s ease;
}

.demo-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.demo-icon {
  font-size: 2.5rem;
  margin-bottom: 15px;
}

.demo-card h3 {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 8px;
  color: #1e293b;
}

.demo-card p {
  font-size: 0.9rem;
  color: #64748b;
}

.transition-section {
  position: relative;
  width: 100%;
  z-index: 2;
  margin: -20px 0;
  transform: translateZ(0);
}

/* ç§»é™¤å¯èƒ½é€ æˆè’™å›¾æ•ˆæœçš„ä¼ªå…ƒç´  */
.transition-section::before {
  display: none;
}

.transition-section::after {
  display: none;
}

.video-showcase-container {
  position: relative;
  min-height: auto;
  overflow: visible;
  z-index: 1;
  background-color: transparent;
  margin: 0;
}

/* å‡å°‘è§†é¢‘å±•ç¤ºåŒºåŸŸçš„é—´è· */
.video-showcase-container + .video-showcase-container {
  margin-top: -40px;
}

/* ç§»é™¤æ³¢æµªæ•ˆæœçš„ä¼ªå…ƒç´ ï¼Œå¯èƒ½ä¼šä¸è½®æ’­å›¾å¹²æ‰° */
.wave-divider {
  display: none; /* å®Œå…¨ç§»é™¤æ³¢æµªåˆ†éš”ç¬¦ */
}

@media (max-width: 768px) {
  .transition-section {
    margin: -10px 0;
  }
  
  .video-showcase-container {
    min-height: auto;
    margin-top: 0;
  }
  
  /* ç§»åŠ¨ç«¯åŒæ ·å‡å°‘è§†é¢‘åŒºåŸŸé—´è· */
  .video-showcase-container + .video-showcase-container {
    margin-top: -20px;
  }
  
  .home-view {
    padding-top: 40px;
  }
}
</style>
